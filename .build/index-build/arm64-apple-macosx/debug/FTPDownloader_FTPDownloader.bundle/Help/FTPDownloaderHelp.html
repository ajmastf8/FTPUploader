<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FTP Downloader Help</title>
    <meta name="description" content="Complete help guide for FTP Downloader - High-performance automated FTP file downloading">
    <meta name="keywords" content="FTP, download, file transfer, synchronization, automation, macOS, help, configuration, setup, troubleshooting, menu bar">
    <style>
        :root {
            color-scheme: light only;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.6;
            color: #000 !important;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff !important;
        }
        * {
            color: #000 !important;
        }
        .header {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
            text-align: center;
        }
        .header h1 {
            margin: 0 0 10px 0;
            color: #007AFF;
        }
        .header p {
            margin: 0;
            font-size: 16px;
            color: #000;
        }
        .toc {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
        }
        .toc h2 {
            margin-top: 0;
            color: #007AFF;
        }
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        .toc li {
            margin-bottom: 8px;
        }
        .toc a {
            color: #007AFF;
            text-decoration: none;
            padding: 4px 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .toc a:hover {
            background-color: #e3f2fd;
        }
        .section {
            background-color: #fff;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        .section h2 {
            color: #007AFF;
            margin-top: 0;
            border-bottom: 2px solid #007AFF;
            padding-bottom: 10px;
        }
        .section h3 {
            color: #000;
            margin-top: 25px;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #007AFF;
        }
        .feature-card h4 {
            margin-top: 0;
            color: #007AFF;
        }
        .feature-card p {
            color: #000;
        }
        .steps {
            counter-reset: step-counter;
        }
        .step {
            counter-increment: step-counter;
            margin-bottom: 20px;
            padding-left: 40px;
            position: relative;
            color: #000;
        }
        .step::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background-color: #007AFF;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        .aggressiveness-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .aggressiveness-table th,
        .aggressiveness-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
            color: #000;
        }
        .aggressiveness-table th {
            background-color: #007AFF;
            color: white;
        }
        .aggressiveness-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .code {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 6px;
            font-family: 'SF Mono', Monaco, monospace;
            border: 1px solid #ddd;
            margin: 15px 0;
            overflow-x: auto;
            color: #000;
        }
        .warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 4px solid #f39c12;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            color: #000;
        }
        .warning strong {
            color: #8b4513;
        }
        .tip {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-left: 4px solid #28a745;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            color: #000;
        }
        .tip strong {
            color: #155724;
        }
        .searchable {
            /* This class helps with search indexing */
            display: block;
        }
        .keyboard-shortcut {
            background-color: #f1f3f4;
            border: 1px solid #dadce0;
            border-radius: 4px;
            padding: 2px 6px;
            font-family: monospace;
            font-size: 12px;
            margin: 0 2px;
        }
        p {
            color: #000;
        }
        ul, ol {
            padding-left: 20px;
        }
        li {
            margin-bottom: 8px;
            color: #000;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>FTP Downloader Help</h1>
        <p>High-performance automated FTP file downloading - Menu Bar Edition</p>
        <p><strong>Version 1.0.6</strong></p>
    </div>

    <div class="toc">
        <h2>Table of Contents</h2>
        <ul>
            <li><a href="#getting-started">Getting Started</a></li>
            <li><a href="#menu-bar-interface">Menu Bar Interface</a></li>
            <li><a href="#creating-configuration">Creating Your First Configuration</a></li>
            <li><a href="#performance-tuning">Performance Tuning</a></li>
            <li><a href="#monitoring">Monitoring & Management</a></li>
            <li><a href="#advanced-features">Advanced Features</a></li>
            <li><a href="#troubleshooting">Troubleshooting</a></li>
            <li><a href="#technical-details">Technical Details</a></li>
        </ul>
    </div>

    <div id="getting-started" class="section searchable">
        <h2>Getting Started</h2>

        <h3>What is FTP Downloader?</h3>
        <p>FTP Downloader is a high-performance macOS menu bar application that automatically downloads files from FTP servers with intelligent file stabilization monitoring. It combines a modern SwiftUI interface with a powerful Rust backend for maximum performance.</p>

        <div class="feature-grid">
            <div class="feature-card">
                <h4>Smart File Processing</h4>
                <p>Monitors file sizes until stable before downloading to prevent incomplete transfers</p>
            </div>
            <div class="feature-card">
                <h4>High Performance</h4>
                <p>Rust-powered backend with up to 200 concurrent connections for maximum throughput</p>
            </div>
            <div class="feature-card">
                <h4>Menu Bar Convenience</h4>
                <p>Access FTP Downloader from your menu bar - always available, never in the way</p>
            </div>
            <div class="feature-card">
                <h4>Real-time Monitoring</h4>
                <p>Live performance tracking, connection times, and detailed operation logs</p>
            </div>
        </div>

        <h3>System Requirements</h3>
        <ul>
            <li><strong>macOS:</strong> 13.0 (Ventura) or later</li>
            <li><strong>RAM:</strong> 4GB minimum, 8GB recommended</li>
            <li><strong>Storage:</strong> 100MB for app, additional space for downloads</li>
            <li><strong>Network:</strong> Internet connection for FTP server access</li>
        </ul>
    </div>

    <div id="menu-bar-interface" class="section searchable">
        <h2>Menu Bar Interface</h2>

        <h3>Menu Bar Icon</h3>
        <p>FTP Downloader runs as a menu bar application, indicated by an icon in your macOS menu bar:</p>
        <ul>
            <li><strong>Orange Icon:</strong> App is running, no active connections</li>
            <li><strong>Green Icon:</strong> One or more configurations actively downloading</li>
        </ul>

        <h3>Opening the Main Window</h3>
        <p>Click the menu bar icon to access the main application window where you can:</p>
        <ul>
            <li>View all configured FTP connections</li>
            <li>Start and stop sync operations</li>
            <li>Monitor real-time download statistics</li>
            <li>Access configuration settings</li>
            <li>View live logs and notifications</li>
        </ul>

        <h3>Background Operation</h3>
        <p>FTP Downloader continues running in the background even when the main window is closed. The menu bar icon provides at-a-glance status of your FTP operations.</p>
    </div>

    <div id="creating-configuration" class="section searchable">
        <h2>Creating Your First Configuration</h2>

        <div class="steps">
            <div class="step">
                <h3>Open FTP Downloader</h3>
                <p>Click the FTP Downloader icon in your menu bar to open the main window.</p>
            </div>

            <div class="step">
                <h3>Create New Configuration</h3>
                <p>Click the <strong>"New Configuration"</strong> button (+ icon) in the toolbar.</p>
            </div>

            <div class="step">
                <h3>Enter Server Details</h3>
                <ul>
                    <li><strong>Configuration Name:</strong> Give your setup a descriptive name</li>
                    <li><strong>FTP Server Address:</strong> Enter the server hostname or IP address</li>
                    <li><strong>Port:</strong> Usually 21 for FTP (default)</li>
                    <li><strong>Username & Password:</strong> Your FTP credentials (stored securely in macOS Keychain)</li>
                </ul>
            </div>

            <div class="step">
                <h3>Test Connection</h3>
                <p>Click <strong>"Test Connection"</strong> to verify your server details are correct.</p>
                <div class="tip">
                    <strong>Tip:</strong> Always test your connection before saving to ensure credentials are correct.
                </div>
            </div>

            <div class="step">
                <h3>Configure Local Settings</h3>
                <ul>
                    <li><strong>Download Directory:</strong> Choose where files will be saved locally</li>
                    <li><strong>FTP Directories:</strong> Add paths on the server to monitor for files</li>
                    <li><strong>Download Mode:</strong> Choose "Delete After Download" or "Keep After Download"</li>
                </ul>
            </div>

            <div class="step">
                <h3>Set Performance Options</h3>
                <ul>
                    <li><strong>Sync Interval:</strong> How often to check for new files (0.1s - 2hr)</li>
                    <li><strong>Stabilization Interval:</strong> How long to wait for file size stability (0-60s)</li>
                    <li><strong>Aggressiveness Level:</strong> Connection strategy based on server capacity</li>
                </ul>
            </div>

            <div class="step">
                <h3>Save and Start</h3>
                <p>Click <strong>"Save"</strong> to store your configuration, then click the <strong>Start button</strong> to begin monitoring. The menu bar icon will turn green when actively downloading.</p>
            </div>
        </div>
    </div>

    <div id="performance-tuning" class="section searchable">
        <h2>Performance Tuning</h2>

        <h3>Aggressiveness Levels</h3>
        <p>Choose the right aggressiveness level based on your FTP server's capacity:</p>

        <table class="aggressiveness-table">
            <thead>
                <tr>
                    <th>Level</th>
                    <th>Connections</th>
                    <th>Best For</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Conservative</strong></td>
                    <td>3</td>
                    <td>Shared/unstable servers</td>
                    <td>Gentle on servers, most reliable</td>
                </tr>
                <tr>
                    <td><strong>Moderate</strong></td>
                    <td>10</td>
                    <td>Standard FTP servers</td>
                    <td>Balanced performance (recommended)</td>
                </tr>
                <tr>
                    <td><strong>Aggressive</strong></td>
                    <td>20</td>
                    <td>Robust dedicated servers</td>
                    <td>High speed for robust servers</td>
                </tr>
                <tr>
                    <td><strong>Extreme</strong></td>
                    <td>50</td>
                    <td>Enterprise servers</td>
                    <td>Very high speed for enterprise servers</td>
                </tr>
                <tr>
                    <td><strong>Maximum</strong></td>
                    <td>100</td>
                    <td>High-capacity servers</td>
                    <td>Maximum speed for high-capacity servers</td>
                </tr>
                <tr>
                    <td><strong>Ultra</strong></td>
                    <td>150</td>
                    <td>Enterprise infrastructure</td>
                    <td>Ultra-high speed for enterprise infrastructure</td>
                </tr>
                <tr>
                    <td><strong>Extreme Max</strong></td>
                    <td>200</td>
                    <td>Maximum performance setups</td>
                    <td>Maximum theoretical performance</td>
                </tr>
            </tbody>
        </table>

        <h3>Sync Interval Guidelines</h3>
        <ul>
            <li><strong>0.1s - 1s:</strong> Near real-time monitoring for time-critical applications</li>
            <li><strong>5s - 30s:</strong> Standard monitoring for regular file transfers</li>
            <li><strong>1hr - 2hr:</strong> Light monitoring for low-frequency file drops</li>
        </ul>

        <h3>Stabilization Settings</h3>
        <ul>
            <li><strong>None (0s):</strong> Download files immediately (risk of incomplete files)</li>
            <li><strong>5s - 15s:</strong> Standard stabilization for most use cases</li>
            <li><strong>30s - 60s:</strong> Conservative stabilization for very large files</li>
        </ul>

        <div class="warning">
            <strong>Warning:</strong> Higher aggressiveness levels may overwhelm servers with limited capacity. Always start with Conservative or Moderate settings and increase gradually while monitoring server response.
        </div>
    </div>

    <div id="monitoring" class="section searchable">
        <h2>Monitoring & Management</h2>

        <h3>Configuration Dashboard</h3>
        <p>The main window shows all your configurations as tabs. Each tab displays:</p>
        <ul>
            <li><strong>Server Status:</strong> Connection status and performance metrics</li>
            <li><strong>Real-time Statistics:</strong> Files per second, connection time, session stats</li>
            <li><strong>Start/Stop Controls:</strong> Independent control of each configuration</li>
            <li><strong>Quick Actions:</strong> Edit, export, or delete configurations</li>
        </ul>

        <h3>Live Logs & Notifications</h3>
        <p>Access detailed operation information:</p>
        <ul>
            <li><strong>Live Logs:</strong> Click the menu button (⋯) and select "Live Logs" to see real-time file discovery, downloads, and errors</li>
            <li><strong>Live Notifications:</strong> View recent activity and file downloads in a scrollable feed</li>
        </ul>

        <h3>File States</h3>
        <p>Files progress through these states during processing:</p>
        <ul>
            <li><strong>Pending:</strong> File discovered, queued for processing</li>
            <li><strong>Monitoring:</strong> File size being checked for stability</li>
            <li><strong>Downloading:</strong> File actively being downloaded</li>
            <li><strong>Completed:</strong> File successfully downloaded</li>
            <li><strong>Failed:</strong> Download failed, automatic retry scheduled</li>
            <li><strong>Deleted:</strong> File removed from server (if Delete mode enabled)</li>
        </ul>

        <h3>Performance Indicators</h3>
        <p>Monitor these key metrics for optimal performance:</p>
        <ul>
            <li><strong>Connection Time:</strong> How long the session has been active</li>
            <li><strong>Files/Second:</strong> Real-time throughput</li>
            <li><strong>Session Statistics:</strong> Total files processed and success rate</li>
            <li><strong>Download Speed:</strong> Current transfer rate when available</li>
        </ul>
    </div>

    <div id="advanced-features" class="section searchable">
        <h2>Advanced Features</h2>

        <h3>Auto-tuning Aggressiveness</h3>
        <p>When enabled, the app automatically adjusts connection strategies based on server performance. This feature:</p>
        <ul>
            <li>Monitors server response times and success rates</li>
            <li>Reduces aggressiveness if the server shows stress</li>
            <li>Gradually increases performance when server handles load well</li>
            <li>Provides optimal balance between speed and reliability</li>
        </ul>

        <h3>Download Modes</h3>
        <h4>Delete After Download</h4>
        <ul>
            <li>Files are removed from the FTP server after successful download</li>
            <li>Prevents duplicate downloads</li>
            <li>Recommended for processing workflows</li>
        </ul>

        <h4>Keep After Download</h4>
        <ul>
            <li>Files remain on the server after download</li>
            <li>Uses hash tracking to prevent re-downloading</li>
            <li>Recommended for backup scenarios</li>
        </ul>

        <h3>Configuration Management</h3>
        <ul>
            <li><strong>Export Configurations:</strong> Save settings as JSON files for backup or sharing</li>
            <li><strong>Import Configurations:</strong> Load saved configuration files</li>
            <li><strong>Clear Downloaded Files:</strong> Reset download history to re-process all files</li>
            <li><strong>Multiple Configurations:</strong> Run multiple FTP connections simultaneously</li>
        </ul>

        <h3>Security Features</h3>
        <ul>
            <li><strong>Keychain Integration:</strong> Passwords stored securely in macOS Keychain</li>
            <li><strong>Secure Transport:</strong> Support for FTPS when available</li>
            <li><strong>Permission Validation:</strong> Proper file system permission handling</li>
            <li><strong>Network Security:</strong> Configurable transport security settings</li>
        </ul>
    </div>

    <div id="troubleshooting" class="section searchable">
        <h2>Troubleshooting</h2>

        <h3>Connection Issues</h3>

        <h4>Connection Failed</h4>
        <ul>
            <li>Verify server address, port, and credentials are correct</li>
            <li>Check firewall settings and network connectivity</li>
            <li>Test with another FTP client (like FileZilla) to confirm server is accessible</li>
            <li>Ensure the server supports the number of connections you're attempting</li>
        </ul>

        <h4>Authentication Error</h4>
        <ul>
            <li>Confirm username and password are correct</li>
            <li>Check if server requires specific authentication methods</li>
            <li>Verify account has necessary permissions for the directories</li>
            <li>Try connecting with a single connection first (Conservative mode)</li>
        </ul>

        <h3>Performance Issues</h3>

        <h4>Slow Downloads</h4>
        <ul>
            <li>Try a lower aggressiveness level to reduce server stress</li>
            <li>Increase stabilization interval for more reliable transfers</li>
            <li>Check network bandwidth and server capacity</li>
            <li>Monitor the Live Logs for connection errors or timeouts</li>
        </ul>

        <h4>Files Not Downloading</h4>
        <ul>
            <li>Verify FTP directory paths exist and are accessible</li>
            <li>Check file permissions on both server and local directories</li>
            <li>Ensure files have stabilized (not still being uploaded to server)</li>
            <li>Check if files match any filtering criteria</li>
        </ul>

        <h3>Menu Bar Issues</h3>

        <h4>Menu Bar Icon Not Changing Color</h4>
        <ul>
            <li>Quit and restart the application</li>
            <li>Check that at least one configuration is actively running (Start button pressed)</li>
            <li>Verify the configuration is actually downloading files (check Live Logs)</li>
        </ul>

        <h3>Common Error Messages</h3>

        <div class="code">
Permission Denied
• Ensure local download directory is writable
• Check FTP server permissions for specified directories
• Verify user account has necessary access rights
        </div>

        <div class="code">
File Not Found
• Verify FTP directory paths exist
• Check for typos in directory paths
• Ensure files haven't been moved or deleted
        </div>

        <div class="code">
Connection Timeout
• Reduce aggressiveness level
• Check network stability
• Verify server can handle current connection load
        </div>

        <h3>Getting Support</h3>
        <p>If you continue to experience issues:</p>
        <ul>
            <li>Check the Live Logs for detailed error information</li>
            <li>Try with Conservative aggressiveness settings</li>
            <li>Test with a different FTP client to isolate server issues</li>
            <li>Contact support with specific error messages and configuration details</li>
        </ul>
    </div>

    <div id="technical-details" class="section searchable">
        <h2>Technical Details</h2>

        <h3>Architecture Overview</h3>
        <p>FTP Downloader uses a hybrid Swift/Rust architecture for optimal performance:</p>

        <h4>Swift Frontend</h4>
        <ul>
            <li><strong>SwiftUI Interface:</strong> Native macOS menu bar application</li>
            <li><strong>Configuration Management:</strong> Secure storage and management</li>
            <li><strong>Real-time Monitoring:</strong> Live updates and progress tracking</li>
            <li><strong>macOS Integration:</strong> Keychain, notifications, and system services</li>
        </ul>

        <h4>Rust Backend</h4>
        <ul>
            <li><strong>High-Performance FTP:</strong> Concurrent connection handling</li>
            <li><strong>File Stabilization:</strong> Intelligent size monitoring algorithms</li>
            <li><strong>Connection Pooling:</strong> Efficient resource management</li>
            <li><strong>Smart Retry Logic:</strong> Exponential backoff and error recovery</li>
        </ul>

        <h3>File Processing Pipeline</h3>
        <ol>
            <li><strong>Discovery:</strong> Scan FTP directories for new files</li>
            <li><strong>Stabilization:</strong> Monitor file sizes until stable</li>
            <li><strong>Queue Management:</strong> Organize files for optimal processing</li>
            <li><strong>Parallel Download:</strong> Concurrent file transfers</li>
            <li><strong>Cleanup:</strong> Delete or mark files as processed</li>
        </ol>

        <h3>Data Storage</h3>
        <ul>
            <li><strong>Configurations:</strong> Secure storage in macOS Keychain</li>
            <li><strong>Credentials:</strong> Encrypted storage in macOS Keychain</li>
            <li><strong>Download History:</strong> Hash-based tracking to prevent duplicates</li>
            <li><strong>Logs:</strong> In-memory with optional file output</li>
        </ul>

        <h3>Network Protocols</h3>
        <ul>
            <li><strong>FTP:</strong> Standard File Transfer Protocol support</li>
            <li><strong>FTPS:</strong> FTP over SSL/TLS when available</li>
            <li><strong>Passive Mode:</strong> Default connection mode for firewall compatibility</li>
            <li><strong>Connection Pooling:</strong> Reuse connections for efficiency</li>
        </ul>

        <h3>Performance Characteristics</h3>
        <ul>
            <li><strong>Memory Usage:</strong> Efficient streaming with minimal RAM requirements</li>
            <li><strong>CPU Usage:</strong> Multi-threaded processing with automatic scaling</li>
            <li><strong>Disk I/O:</strong> Optimized sequential writes for maximum throughput</li>
            <li><strong>Network Utilization:</strong> Adaptive connection management</li>
        </ul>
    </div>

    <div class="section">
        <h2>Support & Contact</h2>

        <h3>Getting Help</h3>
        <p>For technical support, bug reports, or feature requests, use the Contact Support feature in the Help menu to automatically collect diagnostic information and create a support request.</p>

        <h3>Application Information</h3>
        <ul>
            <li><strong>Application Version:</strong> 1.0.6</li>
            <li><strong>Support Email:</strong> support@ronin-group.com</li>
        </ul>

        <div class="tip">
            <strong>Quick Tip:</strong> Use Command+F to search this help document for specific topics or keywords.
        </div>
    </div>
</body>
</html>
